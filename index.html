<script>
/* ============================================================
   ENGLISH → SPANISH PHONETIC PRONUNCIATION (PRO)
   ------------------------------------------------------------
   ✅ Educativo
   ✅ Sin APIs
   ✅ Sin dependencias
   ✅ Pensado para hispanohablantes
   ✅ Pronunciación figurada clara (NO IPA)
   ------------------------------------------------------------
   USO:
   englishToSpanishPhonetic("Learning English is very important");
   → "lérnin ínglish is véri importan"
============================================================ */

/**
 * FUNCIÓN PRINCIPAL
 * @param {string} text - Texto en inglés
 * @returns {string} - Pronunciación figurada en español
 */
function englishToSpanishPhonetic(text) {

  /* ================= VALIDACIÓN ================= */
  if (!text || typeof text !== "string") return "";

  /* ================= NORMALIZACIÓN ================= */
  let t = text
    .toLowerCase()
    .replace(/’/g, "'")
    .replace(/[^a-z0-9\s'.?,!]/g, "")
    .trim();

  /* ================= DICCIONARIO BASE =================
     Palabras comunes que deben sonar NATURALES en español
  ===================================================== */
  const dictionary = {
    "i": "ai",
    "you": "iú",
    "he": "jí",
    "she": "shí",
    "we": "uí",
    "they": "déi",

    "the": "da",
    "this": "dis",
    "that": "dat",
    "these": "dís",
    "those": "dóus",

    "is": "is",
    "are": "ar",
    "was": "uás",
    "were": "uér",

    "have": "jav",
    "has": "jas",
    "had": "jad",

    "do": "dú",
    "does": "das",
    "did": "did",

    "a": "a",
    "an": "an",
    "to": "tú",
    "of": "ov",
    "for": "for",
    "with": "uid",

    "and": "and",
    "or": "or",
    "but": "bat",
    "not": "nat",

    "yes": "yés",
    "no": "nó"
  };

  /* ================= APLICAR DICCIONARIO ================= */
  t = t
    .split(/\s+/)
    .map(word => dictionary[word] || word)
    .join(" ");

  /* ================= SONIDOS COMPLEJOS =================
     Grupos de letras con sonido específico en inglés
  ===================================================== */
  t = t
    .replace(/tion\b/g, "shon")
    .replace(/sion\b/g, "shon")
    .replace(/cial/g, "shal")
    .replace(/tial/g, "shal")

    .replace(/ough/g, "of")
    .replace(/augh/g, "af")
    .replace(/igh/g, "ai")
    .replace(/eigh/g, "éi")

    .replace(/ph/g, "f")
    .replace(/gh/g, "")
    .replace(/ck/g, "k")
    .replace(/qu/g, "ku");

  /* ================= CONSONANTES ================= */
  t = t
    .replace(/th/g, "d")
    .replace(/sh/g, "sh")
    .replace(/ch/g, "ch")
    .replace(/j/g, "y")
    .replace(/v/g, "v")
    .replace(/z/g, "s")
    .replace(/x/g, "ks")
    .replace(/r/g, "r");

  /* ================= VOCALES ================= */
  t = t
    .replace(/ee/g, "í")
    .replace(/oo/g, "ú")
    .replace(/ea/g, "í")
    .replace(/ai/g, "ei")
    .replace(/ay/g, "ei")
    .replace(/oa/g, "ou")
    .replace(/ou/g, "au")
    .replace(/ow/g, "au")
    .replace(/ie/g, "ai")
    .replace(/i\b/g, "ai")
    .replace(/u\b/g, "iu");

  /* ================= TERMINACIONES ================= */
  t = t
    .replace(/ing\b/g, "in")
    .replace(/ed\b/g, "d")
    .replace(/er\b/g, "er")
    .replace(/ly\b/g, "li");

  /* ================= LIMPIEZA FINAL ================= */
  t = t
    .replace(/\s+/g, " ")
    .replace(/\s([.,!?])/g, "$1")
    .trim();

  return t;
}

/* ============================================================
   EJEMPLOS:
   ------------------------------------------------------------
   englishToSpanishPhonetic("I think this is easy");
   → "ai dínk dis is ísi"

   englishToSpanishPhonetic("She speaks English very well");
   → "shí spíks ínglish véri uél"

   englishToSpanishPhonetic("Learning English changes your life");
   → "lérnin ínglish chéinyis yór láif"
============================================================ */
</script>
